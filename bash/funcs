#!/bin/bash

function exportAdd {
    name=${1%%=*}
    value=${1#*=}

    if [[ -z $name ]]; then
        >&2 echo "usage ${FUNCNAME[0]} <name>=<value>"
        return 1
    fi

    # eval "export PATH="$value:$PATH", if $name is PATH.
    case ":${!name}:" in
        *":$value:"*) :;;
        "::") eval "$(echo export $name=\"\$value\")" ;;
        *)    eval "$(echo export $name=\"\$value:\$$name\")" ;;
    esac
}

function tmux-export {
    if ! [[ "$TERM" =~ "screen".* ]]; then
        >&2 echo "error: not in tmux session."
        return 2
    fi

    name=${1%%=*}
    value=${1#*=}

    if [[ -z $name ]]; then
        >&2 echo "usage ${FUNCNAME[0]} <name>=<value>"
        return 1
    fi

    tmux setenv "$name" "$value" && export "$name"="$value"
    return 0
}

